<!DOCTYPE html>
<html lang="pt-PT">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Expedição de Encomenda de Equipamentos</title>

	<script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
	{% include '$navbar.html' %}

	<div class="p-12">
		<div class="flex justify-between items-center w-full">
			<h1 class="text-4xl mb-8">Expedição de Encomenda de Equipamentos</h1>

			<div class="flex gap-4">
				<a href=".." class="bg-gray-900 px-16 py-2 border border-gray-500 rounded-3xl text-white w-fit">Encomendas</a>
			</div>
		</div>

		<div class="flex flex-col gap-4">
			<p><span class="font-bold">ID:</span> {{ shipment.encomenda_id }}</p>
			<p><span class="font-bold">Data de envio:</span> {{ shipment.sent_at }}</p>
			<p><span class="font-bold">Data de chegada esperada:</span> {{ shipment.delivery_date_expected }}</p>
			<p><span class="font-bold">Matrícula:</span> {{ shipment.truck_license }}</p>
			<p><span class="font-bold">Local de Entrega:</span> {{ shipment.address }}, {{ shipment.postal_code }}, {{ shipment.locality }}</p>
			<p><span class="font-bold">Preço Total:</span> {{ total_cost }}€</p>

			<h2 class="text-2xl mt-4">Registos de Produção</h2>
			<table class="overflow-auto border border-gray-300 h-full w-full table-fixed border-collapse border-spacing-px text-left">
				<thead>
					<tr>
						<th class="border border-gray-300 bg-gray-200 p-1">Nome Equipamento</th>
						<th class="border border-gray-300 bg-gray-200 p-1">Produzido a</th>
						<th class="border border-gray-300 bg-gray-200 p-1">Guardado em</th>
						<th class="border border-gray-300 bg-gray-200 p-1">Mão de Obra</th>
						<th class="border border-gray-300 bg-gray-200 p-1">Componentes Usados</th>
					</tr>
				</thead>
				<tbody>
					{% for registo in shipment.registos_producao %}
					<tr>
						<td class="border border-gray-300 p-4">{{ registo.equipamento_name }}</td>
						<td class="border border-gray-300 p-4">{{ registo.ended_at }}</td>
						<td class="border border-gray-300 p-4">{{ registo.armazem_name }}</td>
						<td class="border border-gray-300 p-4">{{ registo.tipo_mao_de_obra_name }} ({{ registo.tipo_mao_de_obra_cost }}€)</td>
						<td class="border border-gray-300 p-4">
							{% for componente in registo.componentes_usados %}
							<p>{{ componente.amount }}x {{ componente.component_name }} ({{ componente.component_cost }}€ unit.)</p>
							{% endfor %}
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</body>

</html>
